<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sure Odds Uganda • Premium Tips</title>

<!-- Fonts & Icons -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(145deg, #0a0f1e 0%, #0f172a 100%);
    color: #f0f4fa;
    min-height: 100vh;
    line-height: 1.6;
  }

  /* Header */
  header {
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 1rem 2rem;
    font-size: 1.8rem;
    font-weight: 700;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 50;
    border-bottom: 1px solid rgba(255,215,0,0.2);
    box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .menu {
    position: absolute;
    left: 1.5rem;
    font-size: 2rem;
    cursor: pointer;
    transition: transform 0.2s;
    color: #fbbf24;
  }
  .menu:hover { transform: scale(1.1); }

  .date {
    position: absolute;
    right: 1.5rem;
    font-size: 1rem;
    background: #1e293b;
    padding: 0.4rem 1rem;
    border-radius: 40px;
    color: #94a3b8;
    font-weight: 400;
    letter-spacing: 0.3px;
  }

  .dropdown {
    display: none;
    position: absolute;
    left: 1.5rem;
    top: 4.5rem;
    background: #1e293b;
    border-radius: 16px;
    padding: 0.5rem;
    box-shadow: 0 20px 35px -8px #000;
    border: 1px solid #334155;
    z-index: 100;
  }
  .dropdown button {
    background: transparent;
    border: none;
    color: white;
    padding: 0.6rem 1.5rem;
    width: 100%;
    text-align: left;
    border-radius: 12px;
    font-size: 1rem;
    transition: 0.2s;
  }
  .dropdown button:hover {
    background: #fbbf24;
    color: #0f172a;
  }

  /* Navigation */
  nav {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    padding: 1rem 1rem 0.5rem;
    flex-wrap: wrap;
    background: transparent;
  }
  nav a {
    background: #1e293b;
    color: #facc15;
    text-decoration: none;
    font-weight: 600;
    padding: 0.7rem 1.8rem;
    border-radius: 40px;
    font-size: 1rem;
    border: 1px solid #334155;
    transition: all 0.2s;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  nav a:hover {
    background: #facc15;
    color: #0f172a;
    border-color: #facc15;
    transform: translateY(-2px);
  }

  /* Main Container */
  .container {
    max-width: 1000px;
    margin: 2rem auto;
    padding: 0 1.5rem;
  }

  /* Cards */
  .section {
    margin-bottom: 2rem;
    padding: 2rem;
    border-radius: 32px;
    background: rgba(30, 41, 59, 0.7);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255,215,0,0.1);
    box-shadow: 0 25px 40px -15px black;
    transition: transform 0.2s;
  }
  .section:hover {
    transform: translateY(-4px);
    border-color: rgba(250,204,21,0.3);
  }

  .free {
    background: linear-gradient(145deg, #1e293b, #0f172a);
  }
  .vip {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: #0f172a;
    border: none;
    box-shadow: 0 20px 30px -10px #f59e0b80;
  }
  .vip h2, .vip p { color: #0f172a; }

  h2 {
    font-size: 2rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    border-bottom: 2px solid #facc15;
    padding-bottom: 0.75rem;
  }
  .vip h2 { border-bottom-color: #0f172a; }

  ul {
    list-style: none;
    margin: 1.5rem 0;
  }
  li {
    background: #334155;
    margin: 0.75rem 0;
    padding: 1rem 1.5rem;
    border-radius: 60px;
    font-weight: 600;
    border-left: 5px solid #facc15;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    transition: 0.2s;
  }
  li:hover { background: #3b4a5f; }

  button {
    background: #facc15;
    color: #0f172a;
    font-weight: 700;
    border: none;
    padding: 1rem 2rem;
    border-radius: 60px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 1rem;
    margin-right: 1rem;
    border: 2px solid transparent;
    box-shadow: 0 8px 20px rgba(250,204,21,0.3);
  }
  button:hover {
    background: #eab308;
    transform: scale(1.02);
    box-shadow: 0 12px 28px rgba(250,204,21,0.5);
  }
  .vip button {
    background: #0f172a;
    color: #facc15;
    box-shadow: 0 8px 20px #0f172a80;
  }
  .vip button:hover { background: #1e293b; }

  input, textarea, select {
    width: 100%;
    padding: 1rem 1.2rem;
    margin: 0.75rem 0;
    border-radius: 40px;
    border: none;
    background: #1e293b;
    color: white;
    font-size: 1rem;
    border: 2px solid #334155;
    transition: 0.2s;
  }
  input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: #facc15;
  }
  textarea { border-radius: 24px; }

  .comment-section {
    margin: 1.5rem 0;
  }
  .comment {
    background: #1e293b;
    padding: 0.8rem 1.2rem;
    border-radius: 30px;
    margin: 0.6rem 0;
    border-left: 4px solid #facc15;
  }

  .notice {
    background: #0f172a;
    color: #facc15;
    padding: 1rem 1.5rem;
    border-radius: 40px;
    font-weight: 600;
    margin: 1.5rem 0;
  }

  /* Correct Score Badges */
  .score-badge {
    background: linear-gradient(145deg, #2d3a4e, #1e2a3a);
    padding: 1rem 1.8rem;
    border-radius: 60px;
    margin: 1rem 0;
    font-size: 1.3rem;
    font-weight: 700;
    border-left: 8px solid #facc15;
    display: inline-block;
    width: auto;
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
  }
  .score-badge span { color: #facc15; margin-right: 1rem; }

  /* WhatsApp Floating Button */
  .whatsapp {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: #25D366;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
    box-shadow: 0 15px 30px #25D36680;
    transition: 0.2s;
    z-index: 100;
    text-decoration: none;
  }
  .whatsapp:hover {
    transform: scale(1.1);
    background: #20bd5a;
  }

  /* Download Icon */
  .download {
    position: fixed;
    top: 1.5rem;
    right: 5.5rem;
    font-size: 2rem;
    color: #facc15;
    cursor: pointer;
    z-index: 100;
    background: #1e293b;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 16px black;
    transition: 0.2s;
  }
  .download:hover { transform: scale(1.1); background: #2d3a4e; }

  /* Admin Panel Area */
  #adminArea {
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 2px dashed #facc15;
  }

  /* Page transitions */
  .page { display: none; animation: fade 0.3s; }
  .active { display: block; }
  @keyframes fade { from { opacity: 0; } to { opacity: 1; } }

  /* VIP Timer */
  #vipTimer {
    background: #0f172a;
    color: #facc15;
    padding: 1rem;
    border-radius: 40px;
    text-align: center;
    font-weight: bold;
    margin: 1rem 0;
  }

  /* Responsive */
  @media (max-width: 600px) {
    header { font-size: 1.4rem; padding: 1rem; }
    .date { display: none; }
    nav a { padding: 0.6rem 1.2rem; font-size: 0.9rem; }
    .section { padding: 1.5rem; }
    h2 { font-size: 1.7rem; }
    .download { right: 5rem; }
  }
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
</head>
<body>

<header>
  <div class="menu" onclick="toggleMenu()">☰</div>
  <span style="color: #facc15;">SURE ODDS</span> UGANDA
  <div class="date" id="todayDate"></div>
  <div class="dropdown" id="menuBox">
    <button onclick="showPage('admin')"><i class="fas fa-lock" style="margin-right:8px;"></i>Admin</button>
  </div>
</header>

<!-- Download Icon -->
<div class="download" onclick="window.location.href='https://drive.google.com/file/d/1uO45XwoXhs5SWV0jqD89stOHAoIuzIsL/view?usp=drivesdk'">
  <i class="fas fa-download"></i>
</div>

<nav>
  <a onclick="showPage('home')"><i class="fas fa-home" style="margin-right:6px;"></i> Home</a>
  <a onclick="showPage('free')"><i class="fas fa-chart-line" style="margin-right:6px;"></i> Free Tips</a>
  <a onclick="showPage('vip')"><i class="fas fa-crown" style="margin-right:6px;"></i> VIP</a>
  <a onclick="showPage('login')"><i class="fas fa-sign-in-alt" style="margin-right:6px;"></i> VIP Login</a>
</nav>

<div class="container">

<!-- HOME -->
<div id="home" class="page active">
  <div class="section free" id="homeScoreDisplay" style="display:none;">
    <h2><i class="fas fa-futbol" style="color:#facc15;"></i> Today's Correct Score</h2>
    <div id="homeScoreList"></div>
  </div>
  <div class="section free">
    <h2><i class="fas fa-fire" style="color:#facc15;"></i> Free Odds</h2>
    <ul id="freeList"></ul>
    <button onclick="openBet('free')"><i class="fas fa-external-link-alt" style="margin-right:8px;"></i>Get Free Tips on BetPawa</button>
    <div class="comment-section" id="freeComments"></div>
    <input id="freeCommentInput" placeholder="Add a public comment...">
    <button onclick="addComment('free')"><i class="fas fa-paper-plane"></i> Comment</button>
  </div>
  <div class="section vip">
    <h2><i class="fas fa-crown"></i> VIP Odds 10</h2>
    <p><i class="fas fa-tag"></i> Weekly: <strong>15,000 UGX</strong></p>
    <p><i class="fas fa-mobile-alt"></i> <b>Send MTN Mobile Money to:</b><br>+256 703 907682</p>
    <p class="notice"><i class="fas fa-exclamation-triangle"></i> After sending money, please send a screenshot on WhatsApp to get your VIP login.</p>
    <p>Follow my TikTok: <a href="https://www.tiktok.com/@ugandan.agent.23?_r=1&_t=ZS-940Y9UzoLCP" target="_blank" style="color:#facc15; font-weight:bold;">@ugandan.agent.23</a></p>
  </div>
</div>

<!-- FREE PAGE -->
<div id="free" class="page">
  <div class="section free" id="freeScoreDisplay" style="display:none;">
    <h2><i class="fas fa-futbol" style="color:#facc15;"></i> Today's Correct Score</h2>
    <div id="freeScoreList"></div>
  </div>
  <div class="section free">
    <h2><i class="fas fa-calendar-day"></i> Today Free Tips</h2>
    <ul id="freeList2"></ul>
    <button onclick="openBet('free')"><i class="fas fa-external-link-alt"></i> Get Free Tips on BetPawa</button>
    <div class="comment-section" id="freeComments2"></div>
    <input id="freeCommentInput2" placeholder="Add a public comment...">
    <button onclick="addComment('free2')"><i class="fas fa-paper-plane"></i> Comment</button>
  </div>
</div>

<!-- VIP PAGE -->
<div id="vip" class="page">
  <div id="vipLocked" class="section vip">
    <h2><i class="fas fa-lock"></i> VIP Only</h2>
    <p>Login after payment. Expiry counts down automatically.</p>
    <p class="notice"><i class="fas fa-exclamation-triangle"></i> After sending money, send a screenshot on WhatsApp to get VIP login.</p>
    <button onclick="showPage('login')"><i class="fas fa-sign-in-alt"></i> VIP Login</button>
  </div>
  <div id="vipContent" class="section free" style="display:none;">
    <h2><i class="fas fa-crown" style="color:gold;"></i> VIP Odds</h2>
    <ul id="vipList"></ul>
    <button onclick="openBet('vip')"><i class="fas fa-external-link-alt"></i> VIP BetPawa Link</button>
    <div id="vipTimer"></div>
    <div class="comment-section" id="vipComments"></div>
    <input id="vipCommentInput" placeholder="Add a private comment...">
    <button onclick="addComment('vip')"><i class="fas fa-paper-plane"></i> Comment</button>
  </div>
</div>

<!-- VIP LOGIN -->
<div id="login" class="page">
  <div class="section free">
    <h2><i class="fas fa-key"></i> VIP Login</h2>
    <input id="vipUser" placeholder="Username">
    <input id="vipPass" type="password" placeholder="Password">
    <button onclick="vipLogin()"><i class="fas fa-unlock-alt"></i> Login</button>
  </div>
</div>

<!-- ADMIN PANEL -->
<div id="admin" class="page">
  <div class="section free">
    <h2><i class="fas fa-user-shield"></i> Admin Panel</h2>
    <input id="adminPass" type="password" placeholder="Admin password">
    <button onclick="unlockAdmin()">Enter</button>
    <div id="adminArea" style="display:none;">

      <h3><i class="fas fa-user-plus"></i> Create VIP User</h3>
      <input id="newUser" placeholder="Username">
      <input id="newPass" placeholder="Password">
      <select id="vipExpiry">
        <option value="weekly">Weekly VIP (7 days)</option>
      </select>
      <button onclick="createVIP()">Create VIP</button>

      <h3><i class="fas fa-edit"></i> Edit Free Tips</h3>
      <textarea id="adminFree" rows="4"></textarea>

      <h3><i class="fas fa-edit"></i> Edit VIP Tips</h3>
      <textarea id="adminVIP" rows="4"></textarea>

      <h3><i class="fas fa-link"></i> BetPawa Links</h3>
      <input id="freeBetLink" placeholder="Free BetPawa link">
      <input id="vipBetLink" placeholder="VIP BetPawa link">

      <h3><i class="fas fa-futbol"></i> Correct Scores (one per line)</h3>
      <textarea id="adminScores" rows="3" placeholder="e.g. Arsenal 2-1 Chelsea&#10;Liverpool 3-0 Man City"></textarea>

      <h3><i class="fas fa-bell"></i> Send Push Notification to All Users</h3>
      <input id="notifTitle" placeholder="Notification Title (e.g. New Tips)">
      <textarea id="notifBody" rows="2" placeholder="Notification message..."></textarea>
      <button onclick="queueNotification()"><i class="fas fa-paper-plane"></i> Send to All Users</button>
      <p style="color:#facc15; font-size:0.9rem;"><i class="fas fa-info-circle"></i> For actual delivery, a Firebase Cloud Function is required (code provided below).</p>

      <button onclick="saveAll()" style="background:#22c55e; color:white; margin-top:2rem;"><i class="fas fa-save"></i> Save All Changes</button>
    </div>
  </div>
</div>

</div>

<a class="whatsapp" href="https://wa.me/256703907682" target="_blank"><i class="fab fa-whatsapp"></i></a>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyA2sHcxmcdXd_r-28VsxU8Nqs_t6s7LBDI",
  authDomain: "sure-odds-uganda.firebaseapp.com",
  databaseURL: "https://sure-odds-uganda-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "sure-odds-uganda",
  storageBucket: "sure-odds-uganda.appspot.com",
  messagingSenderId: "26839342156",
  appId: "1:26839342156:web:e3ea35b88ba31d366528e9"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const messaging = firebase.messaging();

// Date
document.getElementById('todayDate').innerText = new Date().toDateString();

// Show page
function showPage(id){document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));document.getElementById(id).classList.add("active");}

// Toggle menu
function toggleMenu(){const menuBox=document.getElementById('menuBox');menuBox.style.display = menuBox.style.display==="block"?"none":"block";}

// Open BetPawa
function openBet(type){
  if(type==="vip") db.ref('links/vip').once('value',snap=>window.open(snap.val()||"#","_blank"));
  else db.ref('links/free').once('value',snap=>window.open(snap.val()||"#","_blank"));
}

// Load tips
db.ref('tips/free').on('value',snap=>{
  let data = snap.val()||["No Free Tips"];
  freeList.innerHTML = data.map(x=>`<li>${x}</li>`).join("");
  freeList2.innerHTML = data.map(x=>`<li>${x}</li>`).join("");
});
db.ref('tips/vip').on('value',snap=>{
  let data = snap.val()||["No VIP Tips"];
  vipList.innerHTML = data.map(x=>`<li>${x}</li>`).join("");
});

// Load and display Correct Scores
function displayScores() {
  db.ref('scores/today').on('value', snap => {
    let scores = snap.val() || [];
    if (!Array.isArray(scores)) scores = [scores];
    let html = scores.map(s => `<div class="score-badge"><span>⚽</span> ${s}</div>`).join('');
    if (html) {
      document.getElementById('homeScoreList').innerHTML = html;
      document.getElementById('freeScoreList').innerHTML = html;
      document.getElementById('homeScoreDisplay').style.display = 'block';
      document.getElementById('freeScoreDisplay').style.display = 'block';
    } else {
      document.getElementById('homeScoreDisplay').style.display = 'none';
      document.getElementById('freeScoreDisplay').style.display = 'none';
    }
  });
}
displayScores();

// VIP login with welcome message
let vipTimerInterval;
function vipLogin(){
  let u = vipUser.value;
  let p = vipPass.value;
  db.ref("vip/"+u).once("value").then(snap=>{
    if(!snap.exists()) return alert("VIP not found");
    const data = snap.val();
    if(data.pass!==p) return alert("Wrong password");
    if(Date.now()>data.expiry) return alert("VIP expired");
    
    // Show welcome message
    alert("Welcome, " + u + "! You have successfully logged in.");
    
    vipLocked.style.display="none";
    vipContent.style.display="block";
    clearInterval(vipTimerInterval);
    vipTimerInterval=setInterval(()=>{
      let t = data.expiry-Date.now();
      if(t<=0){ location.reload(); return; }
      vipTimer.innerText="VIP expires in "+Math.floor(t/60000)+" min";
    },1000);
  });
}

// Admin
function unlockAdmin(){
  if(adminPass.value==="1234"){
    adminArea.style.display="block";
    db.ref('tips/free').once('value').then(snap=>adminFree.value=(snap.val()||[]).join("\n"));
    db.ref('tips/vip').once('value').then(snap=>adminVIP.value=(snap.val()||[]).join("\n"));
    db.ref('links/free').once('value').then(snap=>freeBetLink.value=snap.val()||"");
    db.ref('links/vip').once('value').then(snap=>vipBetLink.value=snap.val()||"");
    db.ref('scores/today').once('value').then(snap=>{
      let scores = snap.val() || [];
      adminScores.value = Array.isArray(scores) ? scores.join("\n") : scores;
    });
  }else alert("Wrong password");
}

// Create VIP
function createVIP(){
  let expiry = vipExpiry.value==="weekly"?Date.now()+7*24*60*60*1000:Date.now()+24*60*60*1000;
  db.ref("vip/"+newUser.value).set({pass:newPass.value,expiry:expiry});
  alert("VIP Created");
}

// Queue push notification
function queueNotification() {
  let title = notifTitle.value.trim();
  let body = notifBody.value.trim();
  if (!title || !body) return alert("Please enter both title and message");
  db.ref('notifications/outbox').push({
    title: title,
    body: body,
    timestamp: Date.now()
  }).then(() => {
    alert("Notification queued! It will be sent within a few seconds if your cloud function is active.");
    notifTitle.value = '';
    notifBody.value = '';
  }).catch(err => alert("Error: " + err));
}

// Save all admin data
function saveAll(){
  db.ref('tips/free').set(adminFree.value.split("\n").filter(line => line.trim() !== ""));
  db.ref('tips/vip').set(adminVIP.value.split("\n").filter(line => line.trim() !== ""));
  db.ref('links/free').set(freeBetLink.value);
  db.ref('links/vip').set(vipBetLink.value);
  let scores = adminScores.value.split("\n").filter(line => line.trim() !== "");
  db.ref('scores/today').set(scores);
  alert("Saved! Everyone sees updates instantly.");
}

// Comments
function addComment(section){
  let input,id;
  if(section==="free"){input=freeCommentInput;id='comments/free';}
  else if(section==="free2"){input=freeCommentInput2;id='comments/free2';}
  else{input=vipCommentInput;id='comments/vip';}
  if(!input.value) return;
  const comment={text:input.value,time:Date.now()};
  db.ref(id).push(comment);
  input.value="";
}
function loadComments(){
  ['free','free2','vip'].forEach(sec=>{
    const container=document.getElementById(sec==='vip'?'vipComments':sec==='free'?'freeComments':'freeComments2');
    db.ref('comments/'+sec).on('value',snap=>{
      container.innerHTML='';
      snap.forEach(child=>{
        const data=child.val();
        if(Date.now()-data.time>2*24*60*60*1000){child.ref.remove();}
        else container.innerHTML+=`<div class="comment">${data.text}</div>`;
      });
    });
  });
}
loadComments();

// Push notifications setup
messaging.requestPermission()
.then(()=>messaging.getToken({vapidKey:"BE9t9sEWU-8X-2KUiUecmylIpQP2VRkRF3Ej8B2TWmGlnJ3tMCSFHkBpf0o3dYBS1oiZ61hUHLzaBxi1u8EE0Yc"}))
.then(token=>{
  console.log("FCM Token:",token);
  db.ref('fcmTokens/'+token).set(true);
})
.catch(err=>console.log("FCM Permission Denied",err));

messaging.onMessage((payload) => {
  console.log("Message received while open:", payload);
  alert(payload.notification.title + "\n" + payload.notification.body);
});
</script>

<!-- Hidden Cloud Function Instructions (same as before) -->
<div style="display:none;">
  <h3>Firebase Cloud Function for Push Notifications</h3>
  <pre>
// Place this in your Firebase Cloud Functions (index.js)
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

exports.sendPushNotifications = functions.database
  .ref('/notifications/outbox/{pushId}')
  .onCreate(async (snapshot, context) => {
    const { title, body } = snapshot.val();
    // Get all FCM tokens
    const tokensSnap = await admin.database().ref('fcmTokens').once('value');
    const tokens = tokensSnap.val() ? Object.keys(tokensSnap.val()) : [];
    if (tokens.length === 0) return null;

    const payload = {
      notification: { title, body, click_action: 'https://yourapp.com' }
    };

    // Send to all tokens
    const response = await admin.messaging().sendMulticast({ ...payload, tokens });
    // Cleanup invalid tokens
    if (response.failureCount > 0) {
      response.responses.forEach((resp, idx) => {
        if (!resp.success) {
          admin.database().ref('fcmTokens').child(tokens[idx]).remove();
        }
      });
    }
    // Remove the notification request from outbox
    return snapshot.ref.remove();
  });
  </pre>
  <p>Deploy with: <code>firebase deploy --only functions</code></p>
</div>

</body>
       </html>
